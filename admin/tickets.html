<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PulseDesk · Tickets</title>
  <link rel="stylesheet" href="../css/tokens.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
</head>
<body>
  <div class="app">
    <aside class="sidebar" aria-label="Primary">
      <div class="brand">
        <img src="../assets/logo.svg" alt="PulseDesk logo">
        <span class="name">PulseDesk</span>
      </div>
      <nav class="nav">
        <a class="nav-item" href="./dashboard.html" aria-label="Dashboard" title="Dashboard"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M4 4h7v7H4V4zm9 0h7v5h-7V4zM4 13h7v7H4v-7zm9-2h7v9h-7v-9z"/></svg></span><span class="nav-label">Dashboard</span></a>
        <a class="nav-item active" href="./tickets.html" aria-label="Tickets" title="Tickets"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M4 6h16v10H7l-3 3V6z"/></svg></span><span class="nav-label">Tickets</span></a>
        <a class="nav-item" href="./new-ticket.html" aria-label="New Ticket" title="New Ticket"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" d="M12 5v14M5 12h14"/></svg></span><span class="nav-label">New Ticket</span></a>
        <a class="nav-item" href="#" aria-label="Chats" title="Chats"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M4 5h16v10H7l-3 3V5z"/></svg></span><span class="nav-label">Chats</span></a>
        <a class="nav-item" href="#" aria-label="Customers" title="Customers"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm-7 8a7 7 0 0 1 14 0H5z"/></svg></span><span class="nav-label">Customers</span></a>
        <a class="nav-item" href="#" aria-label="Resources" title="Resources"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M3 4h18v4H3V4zm0 6h18v4H3v-4zm0 6h18v4H3v-4z"/></svg></span><span class="nav-label">Resources</span></a>
        <a class="nav-item" href="#" aria-label="Contracts" title="Contracts"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M6 3h12v18H6zM9 7h6v2H9zM9 11h6v2H9zM9 15h6v2H9z"/></svg></span><span class="nav-label">Contracts</span></a>
        <a class="nav-item" href="#" aria-label="Reports" title="Reports"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M5 13h4v8H5v-8zm5-6h4v14h-4V7zm5 3h4v11h-4V10z"/></svg></span><span class="nav-label">Reports</span></a>
        <a class="nav-item" href="#" aria-label="Schedule" title="Schedule"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h2v3h6V2h2v3h3v15H4V5h3V2zm0 7h10v9H7V9z"/></svg></span><span class="nav-label">Schedule</span></a>
        <a class="nav-item" href="#" aria-label="Knowledge Base" title="Knowledge Base"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M4 5h14a2 2 0 0 1 2 2v12l-4-2-4 2-4-2-4 2V7a2 2 0 0 1 2-2z"/></svg></span><span class="nav-label">Knowledge Base</span></a>
        <a class="nav-item" href="#" aria-label="Password Vault" title="Password Vault"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 3a6 6 0 0 0-6 6v3H5a2 2 0 0 0-2 2v5h18v-5a2 2 0 0 0-2-2h-1V9a6 6 0 0 0-6-6zm-2 9h4v3h-4v-3z"/></svg></span><span class="nav-label">Password Vault</span></a>
        <a class="nav-item" href="./settings.html" aria-label="Settings" title="Settings"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg></span><span class="nav-label">Settings</span></a>
        <a class="nav-item" href="#" aria-label="Logout" title="Logout"><span class="nav-ic" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-width="2" d="M8 4h8v16H8"/><path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 8l4 4-4 4M4 12h12"/></svg></span><span class="nav-label">Logout</span></a>
      </nav>
      <div class="nav-cta">
        <a class="new-ticket-cta" href="./new-ticket.html">New Ticket</a>
      </div>
      <div class="sidebar-footer">
        <div class="footer-inner">
          <div class="user-block">
            <div class="avatar">U</div>
            <div class="user-text">
              <div class="user-name">You</div>
              <div class="user-email">you@example.com</div>
            </div>
          </div>
          
        </div>
      </div>
    </aside>
    <div class="content">
      <header class="topbar">
        <div class="topbar-left">
          <a class="logo-inline" href="./dashboard.html">
            <img src="../assets/logo.svg" alt="PulseDesk logo">
            <span class="wordmark">PulseDesk</span>
          </a>
        </div>
        <div class="topbar-right">
          <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">
            <svg class="icon-sun" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <circle cx="12" cy="12" r="4" fill="none" stroke="currentColor" stroke-width="2"/>
              <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <svg class="icon-moon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path d="M21 12.5A8.5 8.5 0 0 1 11.5 3a7 7 0 1 0 9.5 9.5Z"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div class="avatar">U</div>
        </div>
      </header>
      <main class="main">
        <h1 class="section-title">Tickets</h1>
        <p class="page-subtitle">Manage and prioritize support requests with clear SLAs and ownership.</p>
        <div class="card">
          <div class="filters" id="filters">
            <input class="input" type="search" id="q" placeholder="Search subject, requester, email">
            <select class="select" id="f-status">
              <option value="">All statuses</option>
              <option value="open">Open</option>
              <option value="pending">Pending</option>
              <option value="resolved">Resolved</option>
              <option value="closed">Closed</option>
            </select>
            <select class="select" id="f-priority">
              <option value="">All priorities</option>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
            <button class="button secondary" id="clear">Clear filters</button>
          </div>
          <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Subject</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Assignee</th>
                <th>Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          </div>
          <div id="empty" style="display:none; padding:16px;">
            <p class="muted">No tickets found.</p>
            <p class="muted">Keep your queue healthy: log issues early and assign ownership.</p>
            <div style="height:12px"></div>
            <a class="button" href="./new-ticket.html">Create new ticket</a>
          </div>
        </div>
        <footer class="footer">PulseDesk © 2026 – Internal Support Platform.</footer>
      </main>
    </div>
  </div>
<script src="../js/app.js"></script>
<script src="../js/storage.js"></script>
<script src="../js/seed.js"></script>
<script src="../js/theme.js"></script>
<script src="../js/sidebar.js"></script>
<script>
  (function () {
    var S = window.PulseDeskStorage;
    if (!S) return;
    var $tbody = document.querySelector("tbody");
    var $empty = document.getElementById("empty");
    var $q = document.getElementById("q");
    var $fStatus = document.getElementById("f-status");
    var $fPriority = document.getElementById("f-priority");
    var $clear = document.getElementById("clear");
    function shortId(id) {
      if (!id) return "";
      var s = String(id);
      return s.length > 6 ? s.slice(-6) : s;
    }
    function formatDate(s) {
      try {
        var d = new Date(s);
        return d.toLocaleString();
      } catch (e) {
        return s || "";
      }
    }
    function statusLabel(v) {
      var m = { open: "Open", in_progress: "Pending", resolved: "Resolved", closed: "Closed" };
      return m[v] || v || "";
    }
    function statusClass(v) {
      var m = { open: "open", in_progress: "pending", resolved: "resolved", closed: "closed" };
      return m[v] || "open";
    }
    function priorityLabel(v) {
      var m = { low: "Low", medium: "Medium", high: "High", urgent: "Urgent" };
      return m[v] || v || "";
    }
    function priorityClass(v) {
      var m = { low: "low", medium: "medium", high: "high", urgent: "urgent" };
      return m[v] || "low";
    }
    function normalizeStatusFilter(v) {
      if (v === "pending") return "in_progress";
      return v;
    }
    function getData() {
      return S.getTickets();
    }
    function filterData(list) {
      var q = ($q.value || "").toLowerCase();
      var fs = normalizeStatusFilter($fStatus.value || "");
      var fp = ($fPriority.value || "");
      return list.filter(function (t) {
        var okS = !fs || String(t.status) === fs;
        var okP = !fp || String(t.priority) === fp;
        var text = [t.title, t.customer, t.assignee, t.description].join(" ").toLowerCase();
        var okQ = !q || text.indexOf(q) !== -1;
        return okS && okP && okQ;
      });
    }
    function render() {
      var list = filterData(getData());
      if (list.length === 0) {
        $tbody.innerHTML = "";
        $empty.style.display = "block";
        return;
      }
      $empty.style.display = "none";
      var rows = list.map(function (t) {
        var idShort = shortId(t.id);
        var plabel = priorityLabel(t.priority);
        var pcls = priorityClass(t.priority);
        var slabel = statusLabel(t.status);
        var scls = statusClass(t.status);
        var created = formatDate(t.createdAt);
        var assignee = t.assignee ? String(t.assignee) : "Unassigned";
        var href = "./ticket.html?id=" + encodeURIComponent(String(t.id));
        return (
          "<tr>" +
          "<td>" + idShort + "</td>" +
          "<td>" + (t.title || "") + "</td>" +
          "<td><span class='badge badge-priority " + pcls + "'>" + plabel + "</span></td>" +
          "<td><span class='badge badge-status " + scls + "'>" + slabel + "</span></td>" +
          "<td>" + assignee + "</td>" +
          "<td>" + created + "</td>" +
          "<td><a class='button secondary' href='" + href + "'>View</a></td>" +
          "</tr>"
        );
      }).join("");
      $tbody.innerHTML = rows;
    }
    $q.addEventListener("input", render);
    $fStatus.addEventListener("change", render);
    $fPriority.addEventListener("change", render);
    $clear.addEventListener("click", function () {
      $q.value = "";
      $fStatus.value = "";
      $fPriority.value = "";
      render();
    });
    render();
  })();
</script>
</body>
</html>
